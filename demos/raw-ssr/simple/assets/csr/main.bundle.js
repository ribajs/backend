!function(){var e={363:function(){(()=>{if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e})()},695:function(e,t,n){n(139);e.exports=function(e){var t="";return t+="<p>Hoho, {message}</p>"}},139:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function i(e,t){return Array.isArray(e)?function(e,t){for(var n,r="",s="",o=Array.isArray(t),a=0;a<e.length;a++)(n=i(e[a]))&&(o&&t[a]&&(n=c(n)),r=r+s+n,s=" ");return r}(e,t):e&&"object"==typeof e?function(e){var t="",n="";for(var i in e)i&&e[i]&&r.call(e,i)&&(t=t+n+i,n=" ");return t}(e):e||""}function s(e){if(!e)return"";if("object"==typeof e){var t="";for(var n in e)r.call(e,n)&&(t=t+n+":"+e[n]+";");return t}return e+""}function o(e,t,n,r){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(r?e:e+'="'+e+'"');var i=typeof t;return"object"!==i&&"function"!==i||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=c(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}t.merge=function e(t,n){if(1===arguments.length){for(var r=t[0],i=1;i<t.length;i++)r=e(r,t[i]);return r}for(var o in n)if("class"===o){var a=t[o]||[];t[o]=(Array.isArray(a)?a:[a]).concat(n[o]||[])}else if("style"===o){a=(a=s(t[o]))&&";"!==a[a.length-1]?a+";":a;var c=s(n[o]);c=c&&";"!==c[c.length-1]?c+";":c,t[o]=a+c}else t[o]=n[o];return t},t.classes=i,t.style=s,t.attr=o,t.attrs=function(e,t){var n="";for(var a in e)if(r.call(e,a)){var c=e[a];if("class"===a){c=i(c),n=o(a,c,!1,t)+n;continue}"style"===a&&(c=s(c)),n+=o(a,c,!1,t)}return n};var a=/["&<>]/;function c(e){var t=""+e,n=a.exec(t);if(!n)return e;var r,i,s,o="";for(r=n.index,i=0;r<t.length;r++){switch(t.charCodeAt(r)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}i!==r&&(o+=t.substring(i,r)),i=r+1,o+=s}return i!==r?o+t.substring(i,r):o}t.escape=c,t.rethrow=function e(t,r,i,s){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&r||s))throw t.message+=" on line "+i,t;var o,a,c,l;try{s=s||n(582).readFileSync(r,{encoding:"utf8"}),o=3,a=s.split("\n"),c=Math.max(i-o,0),l=Math.min(a.length,i+o)}catch(n){return t.message+=" - could not read from "+r+" ("+n.message+")",void e(t,null,i)}o=a.slice(c,l).map((function(e,t){var n=t+c+1;return(n==i?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=r;try{t.message=(r||"Pug")+":"+i+"\n"+o+"\n\n"+t.message}catch(e){}throw t}},582:function(){}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{AdapterService:function(){return I},BindersService:function(){return M},ComponentService:function(){return H},CoreService:function(){return U},FormatterService:function(){return q},HttpService:function(){return W},LifecycleService:function(){return V}});var t={};n.r(t),n.d(t,{dotAdapter:function(){return J}});var r={};n.r(r),n.d(r,{AddClassBinder:function(){return ee},AnimateStarBinder:function(){return Z},AssignBinder:function(){return ne},AssignPropertyBinder:function(){return te},BlockBinder:function(){return re},CheckedBinder:function(){return ie},ClassStarBinder:function(){return se},ComponentAttributeBinder:function(){return oe},DisabledBinder:function(){return ae},EachStarBinder:function(){return me},EnabledBinder:function(){return fe},FlexSortChildsBinder:function(){return be},HideBinder:function(){return ve},HtmlBinder:function(){return ge},IfBinder:function(){return ye},MaxlengthBinder:function(){return we},NotDraggableBinder:function(){return ke},OnEventBinder:function(){return Ae},ParentBinder:function(){return Ee},ReadonlyBinder:function(){return Ce},RemoveClassBinder:function(){return Ne},ShowBinder:function(){return Oe},SrcsetSizeBinder:function(){return xe},StyleBackgroundImageBinder:function(){return _e},StyleBinder:function(){return Se},StyleStarBinder:function(){return Pe},TagStarBinder:function(){return Te},TemplateBinder:function(){return Be},TextBinder:function(){return Le},ToggleOnEventBinder:function(){return Fe},UncheckedBinder:function(){return je},UnlessBinder:function(){return De},ValueBinder:function(){return Ie}});var i={};n.r(i),n.d(i,{VideoComponent:function(){return ze}});var s={};n.r(s),n.d(s,{andFormatter:function(){return it},appendFormatter:function(){return jt},argsFormatter:function(){return Ct},betweenFormatter:function(){return st},booleanFormatter:function(){return on},callFormatter:function(){return Pt},callNameFormatter:function(){return St},capitalizeFormatter:function(){return Dt},containsFormatter:function(){return Je},cutFormatter:function(){return It},debugFormatter:function(){return Nt},defaultFormatter:function(){return Ot},digitsFormatter:function(){return Et},dividedByFormatter:function(){return vt},downcaseFormatter:function(){return Mt},egtFormatter:function(){return ot},eltFormatter:function(){return ht},emptyFormatter:function(){return $e},endsWithFormatter:function(){return Rt},eqFormatter:function(){return at},evenFormatter:function(){return kt},filledFormatter:function(){return Ut},firstFormatter:function(){return Qe},gcdFormatter:function(){return wt},getFormatter:function(){return Ye},gtFormatter:function(){return ct},handleizeFormatter:function(){return Vt},isArrayFormatter:function(){return an},isBooleanFormatter:function(){return cn},isDefinedFormatter:function(){return ln},isDesktopFormatter:function(){return xt},isIntegerFormatter:function(){return $t},isLastFormatter:function(){return Xe},isMobileFormatter:function(){return _t},isNumberFormatter:function(){return dn},isObjectFormatter:function(){return hn},isStringFormatter:function(){return un},isUndefinedFormatter:function(){return pn},joinFormatter:function(){return rt},jsonFormatter:function(){return he},lastFormatter:function(){return Ke},ltFormatter:function(){return dt},mapFormatter:function(){return Tt},matchFormatter:function(){return Ht},minusFormatter:function(){return ft},moduloFormatter:function(){return gt},neFormatter:function(){return lt},notFormatter:function(){return pt},numberFormatFormatter:function(){return Yt},orFormatter:function(){return ut},osFormatter:function(){return Bt},overlapsFormatter:function(){return nt},padEndFormatter:function(){return Wt},padStartFormatter:function(){return qt},parseFormatter:function(){return mn},pluralizeFormatter:function(){return Qt},plusFormatter:function(){return mt},preferFormatter:function(){return Lt},prependFormatter:function(){return Xt},randomFormatter:function(){return Ze},rangeFormatter:function(){return et},replaceFirstFormatter:function(){return en},replaceFormatter:function(){return Zt},setFormatter:function(){return tt},sizeFormatter:function(){return Ge},sliceFormatter:function(){return tn},startsWithFormatter:function(){return nn},stripFormatter:function(){return rn},stripHtmlFormatter:function(){return sn},ternaryFormatter:function(){return Ft},timesFormatter:function(){return bt},toDecimalFormatter:function(){return Gt},toFloatFormatter:function(){return Jt},toIntegerFormatter:function(){return zt},toNumberFormatter:function(){return bn},toStringFormatter:function(){return fn},unevenFormatter:function(){return At},upcaseFormatter:function(){return Kt}});const o=e=>{const t=[];if("checkbox"===e.type)return e.checked;if("select-multiple"===e.type){const n=e.options;for(const e in n)if(n[e]){const r=n[e];r.selected&&t.push(r.value)}return t}return e.hasAttribute&&e.hasAttribute("contenteditable")?e.innerHTML:e.value},a=async e=>new Promise((t=>{let n;const r=()=>{void 0!==n&&clearTimeout(n),n=setTimeout((()=>{t()}),100)};e.removeEventListener("scroll",r),e.addEventListener("scroll",r),r()}));window.scrollToPosition=async function(e,t){let n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertical",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"smooth";if(!e)return;const o=a(e);if("vertical"===i||"both"===i)switch(t){case"start":n=0;break;case"end":if(e.document){const t=e,r=t.document;n=t.scrollMaxY||Math.max(r.body.scrollHeight,r.body.offsetHeight,r.documentElement.clientHeight,r.documentElement.scrollHeight,r.documentElement.offsetHeight)}else n=e.scrollHeight;break;default:n=t}if("horizontal"===i||"both"===i)switch(t){case"start":r=0;break;case"end":if(e.document){const t=e,n=t.document;r=t.scrollMaxX||Math.max(n.body.scrollWidth,n.body.offsetWidth,n.documentElement.clientWidth,n.documentElement.scrollWidth,n.documentElement.offsetWidth)}else r=e.scrollWidth;break;default:r=t}return e.scroll({behavior:s,top:n,left:r}),o};const c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=-1!==e.localName.indexOf("-");if(r&&t&&customElements){const t=customElements.get(e.localName);return!!t&&(!n||t===e.constructor)}return r},l=async e=>(await customElements.whenDefined(e.localName),e);let d=1;const h={};let u=!1;const p="setImmediate$"+Math.random()+"$";function m(e){window.postMessage(p+e,"*")}function f(e){delete h[e]}function b(e){if(u)setTimeout(b,0,e);else{const t=h[e];if(t){u=!0;try{!function(e){(0,e.callback)(...e.args)}(t)}finally{f(e),u=!1}}}}window.addEventListener("message",(function(e){e.source===window&&"string"==typeof e.data&&0===e.data.indexOf(p)&&b(+e.data.slice(p.length))}),!1);window.setImmediate,window.clearImmediate;const v=()=>{const e=navigator.userAgent,t=window.navigator.platform,n={windows7:/Windows NT 6.1/,windows8:/Windows NT 6.2/,windows81:/Windows NT 6.3/,windows10:/Windows NT 10.0/,windows:/windows/i,windowsPhone:/trident/i,android:/android/i,ios:/(ipad|iphone|ipod)/i,linux:/(linux)/i,unix:/(openbsd|freebsd|netbsd)/i,osxCatalina:/macintosh.+10(_|\.)15/i,osxBigSur:/macintosh.+((10(_|\.)16)|(11(_|\.)))/i,osx:/macintosh/i,mac:/mac/i},r={linux:/Linux/i,unix:/(FreeBSD|OpenBSD|X11|SunOS)/i,webOS:/webOS/i,playstation3:/playstation 3/i,playstation4:/playstation 4/i,PlaystationPortable:/psp/i,newNintendo3Ds:/new nintendo 3ds/i,nintendoDsi:/nintendo dsi/i,nintendo3Ds:/nintendo 3ds/i,nintendoWii:/nintendo wii/i,nintendoWiiU:/nintendo wiiu/i,palmos:/palmos/i,symbian:/(nokia_series_40|s60|symbian)/i};for(const t of Object.keys(n)){if(n[t].test(e))return"mac"===t&&"ontouchend"in document?"ios":t}for(const e of Object.keys(r)){if(r[e].test(t))return e}return"Unknown"},g=()=>{const e=v();let t=!1,n=!1,r=!1;switch(e){case"windows":case"windows10":case"windows7":case"windows8":case"windows81":case"osxBigSur":case"osxCatalina":case"osx":case"mac":case"linux":case"unix":n=!0;break;case"ios":case"android":case"windowsPhone":case"symbian":t=!0}return-1===e.indexOf("playstation")&&-1===e.indexOf("nintendo")||(r=!0),{isMobile:t,isDesktop:n,isGameConsole:r}},y=e=>!(!e||"string"!=typeof e)&&("{"===(e=e.trim()).charAt(0)||"["===e.charAt(0)),w=e=>{if(!e||!y(e))return!1;try{const t=JSON.parse(e);return!(!Array.isArray(t)&&"object"!=typeof t)}catch(e){return!1}},k=e=>{let t=null;if(!y(e))return t;if(w(e))t=JSON.parse(e)||null;else try{t=JSON.parse(e.replace(/'/g,'"'))||null}catch(e){console.warn(e)}return t},A=e=>void 0===e,E=e=>!A(e),C=e=>E(e)&&"object"==typeof e&&null!==e,N=e=>null!=e&&e.toString?e.toString():void 0,O=e=>!isNaN(parseFloat(e))&&!isNaN(e-0),x=e=>"string"==typeof e,_=e=>{if("number"==typeof e)return e;const t=e.replace(/[^-\d.]/g,"");return O(t)?Number(t):0},P=e=>e.replace(/-([a-z0-9])/g,(e=>e[1].toUpperCase())),S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=n=>{for(const r in n)n.hasOwnProperty(r)&&(e.deep&&"[object Object]"===Object.prototype.toString.call(n[r])?t[r]=S(e,t[r],n[r]):e.keepValues?void 0===t[r]&&(t[r]=n[r]):e.onlyDefined?void 0!==n[r]&&(t[r]=n[r]):e.mergeArrays&&Array.isArray(t[r])&&Array.isArray(n[r])?t[r]=[...t[r],...n[r]]:t[r]=n[r])};for(let e=0;e<(arguments.length<=2?0:arguments.length-2);e++)n(e+2<2||arguments.length<=e+2?void 0:arguments[e+2]);return t};let T;!function(e){e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_METADATA=1]="HAVE_METADATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(T||(T={}));n(363);function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class L{constructor(e){this.elements=e}regists(e){if(!C(e))throw new Error("Elements to register must be an object of elements");for(const t in e)if(e[t]&&"__esModule"!==t){const n=e[t];this.regist(n,t)}return this.elements}}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class D{static updateOptions(e){if(!e.adapters)throw new Error("adapters are required!");if(e.adapters&&(D.adapters=j(j({},D.adapters),e.adapters),D.interfaces=Object.keys(D.adapters)),D.rootInterface=e.rootInterface||D.interfaces[0],!D.rootInterface)throw new Error("rootInterface is required!")}static tokenize(e,t){const n=[];let r,i,s={i:t,path:""};for(r=0;r<e.length;r++)i=e.charAt(r),~D.interfaces.indexOf(i)?(n.push(s),s={i:i,path:""}):s.path+=i;return n.push(s),n}static get(e,t){return D.adapters[e.i].get(t,e.path)}static set(e,t,n,r){e?D.adapters[t.i].observe(n,t.path,r):D.adapters[t.i].unobserve(n,t.path,r)}constructor(e,t,n){this.keypath=t,this.callback=n,this.objectPath=[];const r=this.parse();this.key=r.key,this.tokens=r.tokens,this.obj=this.getRootObject(e),this.target=this.realize(),C(this.target)&&D.set(!0,this.key,this.target,this.callback)}parse(){let e,t;if(!D.interfaces||!D.interfaces.length)throw new Error('[Observer] Must define at least one adapter interface. interfaces: "'.concat(JSON.stringify(D.interfaces),'" adapters: "').concat(JSON.stringify(D.adapters),'"'));if(~D.interfaces.indexOf(this.keypath[0])?(t=this.keypath[0],e=this.keypath.substr(1)):(t=D.rootInterface,e=this.keypath),this.tokens=D.tokenize(e,t),!this.tokens.length)throw new Error("[Observer] No tokens");return this.key=this.tokens.pop(),{key:this.key,tokens:this.tokens}}realize(){let e,t,n=this.obj,r=-1;for(let i=0;i<this.tokens.length;i++)t=this.tokens[i],C(n)?(void 0!==this.objectPath[i]?(e=this.objectPath[i],n!==e&&(D.set(!1,t,e,this),D.set(!0,t,n,this),this.objectPath[i]=n)):(D.set(!0,t,n,this),this.objectPath[i]=n),n=D.get(t,n)):(-1===r&&(r=i),e=this.objectPath[i],e&&D.set(!1,t,e,this));return-1!==r&&this.objectPath.splice(r),n}sync(){let e,t;const n=this.realize();n!==this.target?(C(this.target)&&D.set(!1,this.key,this.target,this.callback),C(n)&&D.set(!0,this.key,n,this.callback),e=this.value(),this.target=n,t=this.value(),(t!==e||Array.isArray(t))&&this.callback.sync()):Array.isArray(n)&&this.callback.sync()}value(){if(C(this.target))return D.get(this.key,this.target)}setValue(e){C(this.target)&&D.adapters[this.key.i].set(this.target,this.key.path,e)}unobserve(){let e,t;for(let n=0;n<this.tokens.length;n++)t=this.tokens[n],e=this.objectPath[n],e&&D.set(!1,t,e,this);C(this.target)&&D.set(!1,this.key,this.target,this.callback)}getRootObject(e){let t,n;if(!e.$parent)return e;for(t=this.tokens.length?this.tokens[0].path:this.key.path,n=e;n.$parent&&void 0===n[t];)n=n.$parent;return n}}B(D,"interfaces",[]);class I extends L{constructor(e){super(e),B(this,"type","adapter")}regist(e,t){const n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?t||e.name:e.name||t;if(!n)throw new Error("Adapter name not found!");this.elements[n]=e;const r={adapters:this.elements};return D.updateOptions(r),this.elements}}class M extends L{constructor(e){super(e),B(this,"type","binder")}regist(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)throw new Error("No Binder passed to register!");const r=n?t||e.key:e.key||t;if(!r)throw new Error("Binder name not found!");return this.elements[r]=e,this.elements}}class R{static getNamespaces(){return Object.keys(this.instances)}static getInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";const t=R.instances[e];return t||new this(e)}static getAllInstances(){return R.instances}static clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";const t=R.instances[e];return t.events={},t.eventsOnce={},t}static deleteInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";this.clearInstance(e),delete this.instances[e]}static clearAllInstances(){const e=this.getNamespaces();for(const t of e)this.clearInstance(t)}static deleteAllInstances(){this.clearAllInstances(),this.instances={}}get namespace(){return this._namespace}constructor(e){if(B(this,"events",{}),B(this,"eventsOnce",{}),B(this,"_namespace","anonymous"),e)return R.instances[e]||(this._namespace=e,R.instances[e]=this),R.instances[e]}once(e,t,n){this.eventsOnce[e]=this.eventsOnce[e]||[],void 0!==n?this.eventsOnce[e].push({cb:t.bind(n),orgCb:t,thisContext:n}):this.eventsOnce[e].push(t)}on(e,t,n){this.events[e]=this.events[e]||[],void 0!==n?this.events[e].push({cb:t.bind(n),orgCb:t,thisContext:n}):this.events[e].push(t)}off(e,t,n){if(void 0===e)return this.events={},void(this.eventsOnce={});if(void 0!==t)if(void 0!==n){if(e in this.events)for(const[r,i]of this.events[e].entries()){const s=i;s.orgCb===t&&s.thisContext===n&&this.events[e].splice(r,1)}if(e in this.eventsOnce)for(const[r,i]of this.eventsOnce[e].entries()){const s=i;s.orgCb===t&&s.thisContext===n&&this.eventsOnce[e].splice(r,1)}}else{if(e in this.events)for(const[n,r]of this.events[e].entries()){r===t&&this.events[e].splice(n,1)}if(e in this.eventsOnce)for(const[n,r]of this.eventsOnce[e].entries()){r===t&&this.eventsOnce[e].splice(n,1)}}else this.events[e]=[],this.eventsOnce[e]=[]}trigger(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(e in this.events)for(const t of this.events[e])null!=t&&t.cb?t.cb(...n):t(...n);if(e in this.eventsOnce)for(const[t,r]of this.eventsOnce[e].entries())null!=r&&r.cb?(r.cb(...n),this.eventsOnce[e].splice(t,1)):(r(...n),this.eventsOnce[e].splice(t,1))}}B(R,"instances",{});class U{static get options(){return this._options}constructor(){}static getSingleton(){if(this.instance)return this.instance;throw new Error("Singleton of CoreService not defined, please call setSingleton first!")}static setSingleton(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.instance)throw new Error("Singleton of CoreService already defined!");return this._options=e,this.instance=new this,this.instance}}B(U,"_options",{});class V{constructor(){B(this,"events",R.getInstance("lifecycle")),B(this,"debug",!1),B(this,"routerEvents",R.getInstance()),B(this,"timeout",null),B(this,"components",{}),this.addEventListeners(),this.reset(),V.instance=this}static getInstance(){return V.instance||(V.instance=new V),V.instance}getEmpty(){return{components:[]}}addEventListeners(){this.events.on("Component:connected",(e=>{this.resetTimeout(),this.components[e.tagName]=this.components[e.tagName]||this.getEmpty(),this.components[e.tagName].components.push(e.component)})),this.events.on("Component:disconnected",(()=>{this.resetTimeout(),this.checkStates()})),this.events.on("Component:afterBind",(()=>{this.resetTimeout(),this.checkStates()})),this.events.on("Component:error",((e,t)=>{this.onError(e,t)})),this.routerEvents.on("newPageReady",((e,t,n,r,i,s,o)=>{this.debug&&console.debug("newPageReady",e,t,n,"firstPageLoad",o),o||this.reset()}))}getState(e){let t=0,n=0;for(const r of this.components[e].components)r.connected&&(t++,r.bound&&n++);return{connected:t,bound:n}}getStates(){const e={};for(const t in this.components){const n=this.getState(t);e[t]={state:n,components:this.components[t].components}}return e}checkStates(){let e=!0;const t=this.getStates();for(const n in t){const r=t[n].state;if(r.connected!==r.bound){e=!1;break}}return e&&this.onAllBound(),{states:t,allBound:e}}onAllBound(){this.clearTimeout(),this.events.trigger("ComponentLifecycle:allBound",this.components),this.debug&&console.debug("[ComponentLifecycle] All components bound!")}onError(e,t){this.clearTimeout(),console.error('The component "'.concat(t.tagName,'" has caused an error:'),e),this.events.trigger("ComponentLifecycle:error",e,t)}onTimeout(){this.clearTimeout();const e=this.getStates();if(Object.keys(e).length<=0)return void console.warn("No component found");let t="[ComponentLifecycle] Timeout! {count} component(s) takes too long!\nUnfinished components:\n",n=0;for(const r in e){const i=e[r].state;i.connected!==i.bound&&(n++,t+="".concat(r,": ").concat(JSON.stringify(e[r].state,null,2)," + \n"))}t=t.replace("{count}",n.toString()),this.events.trigger("ComponentLifecycle:error",new Error(t),{})}clearTimeout(){this.timeout&&window.clearTimeout(this.timeout)}resetTimeout(){var e;return this.debug&&console.debug("[ComponentLifecycle] reset timeout.."),this.clearTimeout(),this.timeout=window.setTimeout(this.onTimeout.bind(this),(null===(e=U.options.lifecycle)||void 0===e?void 0:e.timeout)||5e3),this.timeout}reset(){this.debug&&console.debug("[ComponentLifecycle] reset!"),this.components={},this.resetTimeout()}}class H extends L{constructor(e){super(e),B(this,"type","components")}regist(e,t){const n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?t||e.tagName:e.tagName||t;return n?(this.elements[n]=e,this.elements):(console.warn(new Error("Component name not found!"),e),this.elements)}}class q extends L{constructor(e){super(e),B(this,"type","formatter")}regist(e,t){const n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?t||e.name:e.name||t;if(!n)throw new Error("Formatter name not found!");return this.elements[n]=e,this.elements}}class W{static setRequestHeaderEachRequest(e,t){this._requestHeadersEachRequest.push({name:e,value:t})}static async getJSON(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.fetch(e,"GET",t,"json",n,r)}static async post(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.fetch(e,"POST",t,n,r,i)}static async delete(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.fetch(e,"DELETE",t,n,r,i)}static async put(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.fetch(e,"PUT",t,n,r,i)}static async get(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.fetch(e,"GET",t,n,r,i)}static parseDataType(e){const t={};let n="application/x-www-form-urlencoded",r="*/*";switch(e){case"script":n="application/javascript";break;case"json":n="application/json",r="application/json, text/javascript";break;case"xml":n="application/xml",r="application/xml, text/xml";break;case"text":n="text/plain",r="text/plain";break;case"html":n="text/html",r="text/html";break;case"form":n="application/x-www-form-urlencoded"}return n&&(t["Content-Type"]=n,t.Accept=r),t}static async fetch(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(!fetch)throw new Error("Your browser does not support the fetch API, use xhr instead or install a polyfill.");for(const e of this._requestHeadersEachRequest)s[e.name]=e.value;i&&(s=S({deep:!1},s,this.parseDataType(i))),o.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");const a=o.cache?o.cache:"default";if("GET"===n&&r){if(new URLSearchParams(r).toString()){const t=-1!==e.indexOf("?")?"&":"?";e=e+t+new URLSearchParams(r).toString()}}else r&&(t="form"===i?new URLSearchParams(r):JSON.stringify(r));const c=await fetch(e,{credentials:"same-origin",cache:a,method:n,body:t,headers:s,mode:o.mode||"cors"});let l=await c.text();if("string"==typeof l&&w(l)&&(l=JSON.parse(l)),"string"==typeof l)switch(l){case"null":l=null;break;case"true":l=!0;break;case"false":l=!1;break;case"undefined":l=void 0}return{status:c.status,headers:c.headers,ok:c.ok,redirected:c.redirected,statusText:c.statusText,type:c.type,url:c.url,arrayBuffer:c.arrayBuffer,blob:c.blob,bodyUsed:c.bodyUsed,clone:c.clone,formData:c.formData,text:c.text,body:l}}}B(W,"_requestHeadersEachRequest",[]);class z{constructor(){B(this,"name","."),B(this,"counter",0),B(this,"weakmap",{})}weakReference(e){if(!e.hasOwnProperty("__rv")){const t=this.counter++;Object.defineProperty(e,"__rv",{value:t})}return this.weakmap[e.__rv]||(this.weakmap[e.__rv]={callbacks:{}}),this.weakmap[e.__rv]}cleanupWeakReference(e,t){Object.keys(e.callbacks).length||e.pointers&&Object.keys(e.pointers).length||delete this.weakmap[t]}stubFunction(e,t){const n=e[t],r=this.weakReference(e),i=this.weakmap;e[t]=function(){for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];const a=n.apply(e,s);return Object.keys(r.pointers).forEach((e=>{const t=r.pointers[e];i[e]&&Array.isArray(i[e].callbacks[t])&&i[e].callbacks[t].forEach((e=>{e.sync()}))})),a}}observeMutations(e,t,n){if(Array.isArray(e)){const r=this.weakReference(e);r.pointers||(r.pointers={},z.ARRAY_METHODS.forEach((t=>{this.stubFunction(e,t)}))),r.pointers[t]||(r.pointers[t]=[]),-1===r.pointers[t].indexOf(n)&&r.pointers[t].push(n)}}unobserveMutations(e,t,n){if(Array.isArray(e)&&null!=e.__rv){const r=this.weakmap[e.__rv];if(r){const i=r.pointers[t];if(i){const s=i.indexOf(n);s>-1&&i.splice(s,1),i.length||delete r.pointers[t],this.cleanupWeakReference(r,e.__rv)}}}}observe(e,t,n){let r;const i=this.weakReference(e).callbacks;if(!i[t]){i[t]=[];const n=Object.getOwnPropertyDescriptor(e,t);n&&(n.get||n.set||!n.configurable)||(r=e[t],Object.defineProperty(e,t,{enumerable:!0,get:()=>r,set:n=>{if(n!==r){this.unobserveMutations(r,e.__rv,t),r=n;const i=this.weakmap[e.__rv];if(i){const r=i.callbacks[t];r&&r.forEach((e=>{e.sync()})),this.observeMutations(n,e.__rv,t)}}}}))}-1===i[t].indexOf(n)&&i[t].push(n),this.observeMutations(e[t],e.__rv,t)}unobserve(e,t,n){const r=this.weakmap[e.__rv];if(r){const i=r.callbacks[t];if(i){const s=i.indexOf(n);s>-1&&(i.splice(s,1),i.length||(delete r.callbacks[t],this.unobserveMutations(e[t],e.__rv,t))),this.cleanupWeakReference(r,e.__rv)}}}get(e,t){return e[t]}set(e,t,n){e[t]=n}}B(z,"ARRAY_METHODS",["push","pop","shift","unshift","sort","reverse","splice"]);const J=new z,G=/^'.*'$|^".*"$/,$=/((?:'[^']*')*(?:(?:[^|']*(?:'[^']*')+[^|']*)+|[^|]+))|^$/g;function Y(e){let t=0,n=e;if(void 0===e)return{type:t,value:void 0};if(G.test(e)){n=e.slice(1,-1);const t=k(n);n=t||n}else if("true"===e)n=!0;else if("false"===e)n=!1;else if("null"===e)n=null;else if("undefined"===e)n=void 0;else if(""===e)n=void 0;else if(isNaN(Number(e)))if(y(n)){const e=k(n);n=e||n}else t=1;else n=Number(e);return{type:t,value:n}}const Q=/[^\s']+|'([^']|'[^\s])*'|"([^"]|"[^\s])*"/g,X=/\s+/;class K{constructor(e,t,n,r,i,s,o){B(this,"publishes",!1),B(this,"priority",0),B(this,"formatterObservers",{}),this.view=e,this.el=t,this.type=n,this.name=r,this.keypath=i,this.formatters=s,this.model=void 0,this.args=o&&n?this.getStarArguments(o,n):new Array}observe(e,t,n){return new D(e,t,n)}parseTarget(){if(this.keypath){const e=Y(this.keypath);if(0===e.type)this.value=e.value;else{if(1!==e.type)throw new Error("[".concat(this.name,"] Unknown type in token"));this.observer=this.observe(this.view.models,this.keypath,this),this.model=this.observer.target}}else this.value=void 0}getIterationAlias(e){return"%"+e+"%"}parseFormatterArguments(e,t){return e.map(Y).map(((e,n)=>{let{type:r,value:i}=e;if(0===r){return i}if(1===r){const e=i;this.formatterObservers[t]||(this.formatterObservers[t]={});let r=this.formatterObservers[t][n];return r||(r=this.observe(this.view.models,e,this),this.formatterObservers[t][n]=r),r.value()}throw new Error("[".concat(this.name,"] Unknown argument type"))}))}formattedValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null===this.formatters)throw new Error("[".concat(this.name," formatters is null"));let n=!1;const r=t?this.formatters.slice(t):this.formatters;return r.reduce(((t,i,s)=>{if(n)return t;const o=i.match(Q);if(null===o)return console.warn(new Error("[".concat(this.name,'] No args matched with regex "FORMATTER_ARGS"!\nvalue: ').concat(JSON.stringify(e),"\nresult: ").concat(JSON.stringify(t),"\ndeclaration: ").concat(JSON.stringify(i),"\nindex: ").concat(s,"\n"))),t;const a=o.shift();if(!a)throw new Error("[".concat(this.name,"] No formatter id found in args!"));if(!this.view.options.formatters)throw new Error("[".concat(this.name,"] No formatters are defined!"));const c=this.view.options.formatters[a];if(!c)throw new Error("[".concat(this.name,'] No formatters with id "').concat(a,'" found!'));const l=this.parseFormatterArguments(o,s);return c&&"function"==typeof c.read&&(t=c.read.apply(this.model,[t,...l])),s<r.length-1&&t&&"function"==typeof t.then&&"function"==typeof t.catch?(n=!0,t.then((e=>this.formattedValue(e,s+1)))):t}),e)}eventHandler(e,t){const n=this.view.options.handler;return r=>{if(!n)throw new Error("No handler defined in binding.view.options.handler");n.call(e,this,r,this,t)}}set(e){try{e=this.formattedValue(e)}catch(t){return console.error(t),e}"function"==typeof this.routine&&(e&&"function"==typeof e.then&&"function"==typeof e.catch?e.then((e=>{this.routine(this.el,e)})).catch((e=>{console.error(e)})):this.routine(this.el,e))}sync(){this.observer?(this.model=this.observer.target,this.set(this.observer.value())):this.set(this.value)}publish(){if(this.observer){if(null===this.formatters)throw new Error("formatters is null");const e=this.formatters.reduceRight(((e,t,n)=>{const r=t.split(X),i=r.shift();if(!i)throw new Error("id not defined");if(!this.view.options.formatters)return;const s=this.view.options.formatters[i],o=this.parseFormatterArguments(r,n);return s&&"function"==typeof s.publish&&(e=s.publish(e,...o)),e}),this._getValue(this.el));this.observer.setValue(e)}}_bind(){if(this.parseTarget(),this.bind){if("function"!=typeof this.bind)throw new Error("the method bind is not a function");this.bind(this.el)}this.view.options.preloadData&&this.sync()}_unbind(){this.unbind&&this.unbind(this.el),this.observer&&this.observer.unobserve(),Object.keys(this.formatterObservers).forEach((e=>{const t=this.formatterObservers[e];Object.keys(t).forEach((e=>{t[e].unobserve()}))})),this.formatterObservers={}}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.observer&&(this.model=this.observer.target),"function"==typeof this.update&&this.update(e)}_getValue(e){return"function"==typeof this.getValue?this.getValue(e):o(e)}getStarArguments(e,t){const n=new RegExp("^".concat(e.replace(/\*/g,"(.+)"),"$")),r=t.match(n);return r&&r.slice(1)||[]}}B(K,"key",""),B(K,"block",!1);class Z extends K{constructor(){super(...arguments),B(this,"function",!0),B(this,"priority",1e3)}bind(e){const t=this.args[0];e.classList.add(t)}routine(e,t){const n=this.args[0];t?(e.classList.add(n+"-start"),e.classList.remove(n+"-done")):(e.classList.remove(n+"-start"),e.classList.add(n+"-done"))}}B(Z,"key","animate-*");class ee extends K{constructor(){super(...arguments),B(this,"function",!0),B(this,"priority",1e3)}bind(e){this.staticClasses=e.className.split(" ")}unbind(){delete this.staticClasses}routine(e,t){var n;t?-1===(null===(n=this.staticClasses)||void 0===n?void 0:n.indexOf(t))&&(e.className=this.staticClasses.join(" ")+" "+t):this.staticClasses&&(e.className=this.staticClasses.join(" "));e.className=e.className.trim()}}B(ee,"key","add-class");class te extends K{routine(e,t){const n=P(this.args[0].trim());this.view.models[n]=t}}B(te,"key","assign-*");class ne extends K{routine(e,t){if("object"==typeof t)return S({deep:!1},this.view.models,t);console.warn("Value must be an object or propertyName is required")}}B(ne,"key","assign");class re extends K{routine(){}}B(re,"key","block"),B(re,"block",!0);class ie extends K{constructor(){super(...arguments),B(this,"publishes",!0),B(this,"priority",2e3),B(this,"onChange",this.publish.bind(this))}bind(e){e.addEventListener("change",this.onChange)}unbind(e){e.removeEventListener("change",this.onChange)}routine(e,t){let n;this._getValue?n=this._getValue(e):(console.warn("this._getValue is not a function, this: ",this),n=o(e)),"radio"===e.type?e.checked=N(n)===N(t):n!==t&&(e.checked=!!t)}getValue(e){return o(e)}}B(ie,"key","checked");class se extends K{routine(e,t){if(null===this.args)throw new Error("args is null");const n=e.className.split(" ").filter((e=>""!==e)),r=this.args[0].trim(),i=n.indexOf(r);-1===i?t&&(e.className+=" ".concat(r)):t||(e.className=n.filter(((e,t)=>t!==i)).join(" "))}}B(se,"key","class-*");class oe extends K{constructor(){super(...arguments),B(this,"publishes",!0)}routineIntern(e,t){const n=this.args[0].trim();e.setBinderAttribute?void 0!==t&&e.setBinderAttribute(n,t):console.warn("[componentAttributeBinder] You can only use this binder on Riba components",e)}async routine(e,t){c(e,!0,!0)?this.routineIntern(e,t):c(e,!0)?(await l(e),this.routineIntern(e,t)):console.warn("[componentAttributeBinder] You can only use this binder on Riba components",e)}bindIntern(e){const t=this.args[0].trim();"function"==typeof e.observeAttribute?this.componentAttributeObserver=e.observeAttribute(t,{sync:()=>{this.publish()}}):console.warn("[componentAttributeBinder] You can only use this binder on Riba components",e)}async bind(e){c(e,!0,!0)?this.bindIntern(e):c(e,!0)?(await l(e),this.bindIntern(e)):console.warn("[componentAttributeBinder] You can only use this binder on Riba components",e)}unbind(){var e;null===(e=this.componentAttributeObserver)||void 0===e||e.unobserve()}getValue(e){const t=this.args[0].trim();return e.getBinderAttribute(t)}}B(oe,"key","co-*");class ae extends K{routine(e,t){e.disabled=!!t}}B(ae,"key","disabled");class ce extends K{routine(e,t){e.data=null!=t?t:""}}function le(e,t){let n=null;const r=e.length;let i=0,s=0;const o=t[0],a=t[1];for(;s<r;){if(i=e.indexOf(o,s),i<0){n&&n.push({type:0,value:e.slice(s)});break}{if(n=n||[],i>0&&s<i&&n.push({type:0,value:e.slice(s,i)}),s=i+o.length,i=e.indexOf(a,s),i<0){const t=e.slice(s-o.length),r=n[n.length-1];r&&0===r.type?r.value+=t:n.push({type:0,value:t});break}const t=e.slice(s,i).trim();n.push({type:1,value:t}),s=i+a.length}}return n}function de(e,t,n){let r=!1;if((t=t).nodeType===Node.TEXT_NODE){let i=null;if(t.data&&(i=le(t.data,n)),i&&i.length){for(let n=0;n<i.length;n++){const r=i[n],s=document.createTextNode(r.value);t.parentNode&&s&&t&&t.parentNode.insertBefore(s,t),1===r.type&&e.buildBinding(s,null,r.value,ce,null)}t.parentNode&&t.parentNode.removeChild(t)}r=!0}else t.nodeType===Node.ELEMENT_NODE&&(r=e.traverse(t));if(!r&&t.childNodes&&t.childNodes.length>0)for(let r=0;r<t.childNodes.length;r++){const i=t.childNodes[r];i&&de(e,i,n)}}B(ce,"key","mustache-text");const he={name:"json",read(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=JSON.stringify(e,null,t);return n&&r?r.replace(/'/g,"&#39;"):r}};class ue extends K{routine(e,t){if(!this.type)throw new Error("Can't set attribute of "+this.type);const n=e.getAttribute(this.type);let r;switch(typeof t){case"string":case"number":case"boolean":r=t;break;case"object":null===t?t=null:r=he.read(t,0);break;default:r=t}null!=r?String(n).toString()!==String(r).toString()&&(e.setAttribute(this.type,r),e.dispatchEvent(new CustomEvent("binder-changed",{detail:{name:this.type,newValue:r,oldValue:n}}))):(e.removeAttribute(this.type),e.dispatchEvent(new CustomEvent("binder-changed",{detail:{name:this.type,newValue:r,oldValue:n}})))}}B(ue,"key","*");class pe{static create(e,t,n){var r;const i=e.el.cloneNode(!0),s=new pe(i,t,e.view.options);return s.bind(),null!=e&&null!==(r=e.marker)&&void 0!==r&&r.parentNode?e.marker.parentNode.insertBefore(i,n):console.warn("[View]: No parent node for binding!"),s}constructor(e,t,n){B(this,"bindings",[]),B(this,"webComponents",[]),Array.isArray(e)?this.els=e:this.els=[e],this.models=t,this.options=n,this.build()}registComponents(){for(const e in this.options.components)if(this.options.components[e]&&!customElements.get(e)){const t=this.options.components[e];this.registComponent(t,e)}}bind(){this.bindings.forEach((e=>{e._bind()}))}unbind(){Array.isArray(this.bindings)&&this.bindings.forEach((e=>{e._unbind(),e.el,this.options.removeBinderAttributes})),Array.isArray(this.webComponents)&&this.webComponents.forEach((e=>{"function"==typeof e.unbind&&e.unbind()}))}sync(){this.bindings.forEach((e=>{e.sync&&e.sync()}))}publish(){this.bindings.forEach((e=>{e.publishes&&e.publish&&e.publish()}))}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach((t=>{this.models[t]=e[t]}));for(const t of this.bindings)t._update&&t._update(e)}build(){if(this.bindings=[],!this.options.templateDelimiters)throw new Error("templateDelimiters required");const e=this.els;for(let t=0;t<e.length;t++){const n=e[t];n&&de(this,n,this.options.templateDelimiters)}this.bindings.sort(pe.bindingComparator)}startsWithPrefix(e){const t=this.options.fullPrefix;if(!t)throw new Error("prefix is required");for(const n of t)if(e.startsWith(n))return n}bindBinders(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.attributeBinders,r=!1;if(!this.options.binders)return r;const i=[];for(let s=0,o=e.length;s<o;s++){let o="",a=null;const c=e[s],l=this.startsWithPrefix(c.name);if(l){let e="";if(o=c.name.slice(l.length),this.options.binders[o]&&(a=this.options.binders[o]),null===a)for(let t=0;t<n.length;t++){e=n[t];if(new RegExp("^".concat(e.replace(/\*/g,".+"),"$")).test(o)){a=this.options.binders[e];break}}if(null===a&&(this.options.binders["*"]?(a=this.options.binders["*"],e="*"):a=ue),a.block)return this.buildBinding(t,o,c.value,a,e),t.removeAttribute&&this.options.removeBinderAttributes&&t.removeAttribute(c.name),r=!0,r;i.push({attr:c,Binder:a,nodeName:o,identifier:e})}}for(let e=0;e<i.length;e++){const n=i[e];this.buildBinding(t,n.nodeName,n.attr.value,n.Binder,n.identifier),t.removeAttribute&&this.options.removeBinderAttributes&&t.removeAttribute(n.attr.name)}return r}bindComponent(e){let t=!1;if(!this.options.components)return t;const n=e.nodeName.toLowerCase(),r=this.options.components[n];return r?(this.registComponent(r,n),t=!0):this.options.blockUnknownCustomElements&&c(e)&&!n.endsWith("-page")&&(t=!0),t}traverse(e){let t=-1!==this.options.blockNodeNames.indexOf(e.nodeName);const n=e.attributes;return n&&this.options.binders&&(t=this.bindBinders(n,e),t)||t||e._bound||!this.options.components||(t=this.bindComponent(e)),t}buildBinding(e,t,n,r,i){const s=function(e){const t=e.match($);if(null===t)throw new Error("[View] No matches");const n=t.map((e=>e.trim()));return{keypath:n.shift()||void 0,pipes:n}}(n),o=s.keypath,a=s.pipes;this.bindings.push(new r(this,e,t,r.key,o,a,i))}registComponent(e,t){if(!customElements)throw console.error("customElements not supported by your browser!"),new Error("customElements not supported by your browser!");const n=t||e.tagName;customElements.get(n)||customElements.define(e.tagName,e)}}B(pe,"bindingComparator",((e,t)=>{const n=e.priority||0;return(t.priority||0)-n}));class me extends K{constructor(){super(...arguments),B(this,"priority",4e3),B(this,"iterated",[])}bind(e){var t,n,r;this.marker?this.iterated.forEach((e=>{e.bind()})):(this.marker=null===(t=window)||void 0===t||null===(n=t.document)||void 0===n?void 0:n.createComment(" riba: ".concat(this.type," ")),null!==(r=e.parentNode)&&void 0!==r&&r.insertBefore&&this.marker&&(e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e)))}unbind(){this.iterated&&this.iterated.forEach((e=>{e.unbind()}))}routine(e,t){if(null===this.args)throw new Error("args is null");let n=!1;const r=P(this.args[0].toString());if(t=t||[],Array.isArray(t)||"object"!=typeof t||null===t||(t=Object.entries(t).map((e=>{let[t,n]=e;return{key:t,value:n}})),n=!0),!Array.isArray(t))throw new Error("each-".concat(this.args[0]," needs an array or object to iterate over, but it is ").concat(typeof t));const i=e.getAttribute("index-property")||this.getIterationAlias(r);t.forEach(((e,t)=>{const s={$parent:this.view.models};n?(s[i]=e.key,s[r]=e.value):(s[i]=t,s[r]=e);let o=this.iterated[t];if(o)if(o.models[r]!==e){let n,c=this.iterated[t];for(let i=t+1;i<this.iterated.length;i++)if(c=this.iterated[i],c.models[r]===e){n=i;break}if(void 0!==n){var a;if(this.iterated.splice(n,1),!this.marker||null===(a=this.marker.parentNode)||void 0===a||!a.insertBefore)throw new Error("Marker has no parent node");c&&c.els[0]&&o.els[0]&&this.marker.parentNode.insertBefore(c.els[0],o.els[0]),c.models[i]=t}else c=pe.create(this,s,o.els[0]);this.iterated.splice(t,0,c)}else o.models[i]=t;else{let e;if(this.iterated.length?e=this.iterated[this.iterated.length-1].els[0]:this.marker&&(e=this.marker),!e)return;o=pe.create(this,s,e.nextSibling),this.iterated.push(o)}})),this.iterated.length>t.length&&((e,t)=>{for(let n=0;n<e;n++)t()})(this.iterated.length-t.length,(()=>{const e=this.iterated.pop();if(!e)throw new Error("view is undefined!");if(e.unbind(),!this.marker||!this.marker.parentNode)throw new Error("Marker has no parent node");this.marker.parentNode.removeChild(e.els[0])})),"OPTION"===e.nodeName&&this.view.bindings&&this.view.bindings.forEach((e=>{this.marker&&e.el===this.marker.parentNode&&"value"===e.type&&e.sync&&e.sync()}))}update(e){const t={};Object.keys(e).forEach((n=>{if(null===this.args)throw new Error("args is null");n!==this.args[0]&&(t[n]=e[n])})),this.iterated.forEach((e=>{e.update(t)}))}}B(me,"key","each-*"),B(me,"block",!0);class fe extends K{routine(e,t){e.disabled=!t}}B(fe,"key","enabled");class be extends K{constructor(){super(...arguments),B(this,"priority",9e4)}routine(e,t){const n=Array.from(e.children);n.sort(((e,n)=>e.dataset.sortBy&&n.dataset.sortBy?e.dataset.sortBy<n.dataset.sortBy?t?1:-1:e.dataset.sortBy>n.dataset.sortBy?t?-1:1:0:0));for(let e=0;e<n.length;e++){n[e].style.order=e.toString()}}}B(be,"key","flex-sort-childs");class ve extends K{routine(e,t){e.style.display=t?"none":"",t?e.setAttribute("hidden","true"):e.removeAttribute("hidden")}}B(ve,"key","hide");class ge extends K{routine(e,t){e.innerHTML=void 0!==t?t.toString():""}}B(ge,"key","html");class ye extends K{constructor(){super(...arguments),B(this,"priority",4e3),B(this,"attached",!1)}bind(e){var t,n,r;this.marker?this.nested&&this.nested.bind():(this.marker=null===(t=window)||void 0===t||null===(n=t.document)||void 0===n?void 0:n.createComment(" riba: "+this.type+" "+this.keypath+" "),this.attached=!1,null!==(r=e.parentNode)&&void 0!==r&&r.insertBefore&&(e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e)))}unbind(){this.nested&&this.nested.unbind()}routine(e,t){(t=!!t)!==this.attached&&(t?(this.nested||(this.nested=new pe(e,this.view.models,this.view.options),this.nested.bind()),this.marker&&this.marker.parentNode&&this.marker.parentNode.insertBefore(e,this.marker.nextSibling),this.attached=!0):(e.parentNode&&e.parentNode.removeChild(e),this.attached=!1))}update(e){this.nested&&this.nested.update(e)}}B(ye,"key","if"),B(ye,"block",!0);class we extends K{routine(e,t){"number"==typeof t?(e.setAttribute("maxlength",t.toString()),e.maxLength=t):e.removeAttribute("maxlength")}}B(we,"key","maxlength");class ke extends K{routine(e){e.addEventListener("dragstart",(e=>(e.preventDefault(),!1)))}}B(ke,"key","not-draggable");class Ae extends K{constructor(){super(...arguments),B(this,"function",!0),B(this,"priority",1e3)}unbind(e){if(this.handler){if(null===this.args)throw new Error("args is null");const t=this.args[0];e.removeEventListener(t,this.handler)}}routine(e,t){if(null===this.args)throw new Error("args is null");const n=this.args[0],r={passive:"true"===this.el.dataset.passive};this.handler&&e.removeEventListener(n,this.handler,r),this.handler=this.eventHandler(t,e).bind(this),e.addEventListener(n,this.handler,r)}}B(Ae,"key","on-*");class Ee extends K{routine(){}bindIntern(e){e.setBinderAttribute?e.setBinderAttribute("$parent",this.view.models):console.warn("[parentBinder] You can only use this binder on Riba components",e.localName,customElements.get(e.localName))}async bind(e){c(e,!0,!0)?this.bindIntern(e):c(e,!0)?(console.info("[parentBinder] CustomElement ".concat(e.localName," has been defined, but is not yet upgraded. Waiting for upgrade.."),e),await l(e),this.bindIntern(e)):console.warn("[parentBinder] You can only use this binder on Riba components",e.localName)}}B(Ee,"key","parent");class Ce extends K{routine(e,t){t=!!t,e.readOnly=t,t?e.setAttribute("readonly",""):e.removeAttribute("readonly")}}B(Ce,"key","readonly");class Ne extends K{bind(e){this.staticClassesString=e.className}routine(e,t){const n=new RegExp("\\b".concat(t,"\\b"),"g");if(!this.staticClassesString)throw new Error("staticClassesString is undefined!");e.className=this.staticClassesString.replace(n,"").trim()}}B(Ne,"key","remove-class");class Oe extends K{routine(e,t){e.style.display=t?"":"none",t?e.removeAttribute("hidden"):e.setAttribute("hidden","true")}}B(Oe,"key","show");class xe extends K{routine(e,t){const n=this.args[0];let r=e.getAttribute("srcset");if("string"!=typeof r&&(r=""),"string"==typeof t&&t.length>0){const e=r.length>0?", ":"";r+="".concat(e).concat(t," ").concat(n)}else{let e=r.split(",");e=e.map((e=>e.trim())),e=e.filter((e=>!(-1!==e.indexOf(n)))),r=e.join(", ")||""}e.setAttribute("srcset",r)}}B(xe,"key","srcset-*");class _e extends K{routine(e,t){const n="background-image";null==t||""===t?e.style.removeProperty(n):e.style.setProperty(n,"url(".concat(t,")"))}}B(_e,"key","style-background-image");class Pe extends K{routine(e,t){const n=this.args[0];null==t||""===t?e.style.removeProperty(n.toString()):e.style.setProperty(n.toString(),t)}}B(Pe,"key","style-*");class Se extends K{routine(e,t){if(t)if("string"==typeof t)e.setAttribute("style",t);else for(const n of Object.keys(t))e.style.setProperty(n.replace(/[A-Z]/g,(e=>"-".concat(e.toLowerCase()))),t[n]||null);else for(const t of Object.keys(e.style))e.style.removeProperty(t)}}B(Se,"key","style");class Te extends K{constructor(){super(...arguments),B(this,"priority",-1e3)}bind(e){this.originalTag=e.tagName.toLowerCase()}routine(e,t){if(null===this.args)throw new Error("args is null");const n=this.el.tagName.toLowerCase();let r;if(t)r=this.args[0].trim().toLowerCase();else{if(!this.originalTag)throw new Error("Tag name not found!");r=this.originalTag.toLowerCase()}if(n!==r){const t=document.createElement(r);for(;e.childNodes.length>0;)e.firstChild&&t.appendChild(e.firstChild);const n=Array.prototype.slice.call(e.attributes);for(const e of n)t.setAttribute(e.name,e.value);e.parentNode?e.parentNode.replaceChild(t,e):console.warn("No parent"),this.el=t}}}B(Te,"key","tag-*");class Be extends K{bind(e){this.nested=new pe(e,this.view.models,this.view.options)}routine(e,t){var n,r;null===(n=this.nested)||void 0===n||n.unbind(),e.innerHTML=t||"",this.nested=new pe(e,this.view.models,this.view.options),null===(r=this.nested)||void 0===r||r.bind()}unbind(){var e;null===(e=this.nested)||void 0===e||e.unbind()}update(e){var t;null===(t=this.nested)||void 0===t||t.update(e)}}B(Be,"key","template");class Le extends K{routine(e,t){e.textContent=null!=t?t.toString():""}}B(Le,"key","text");class Fe extends K{toggle(){this.propertyKey&&(this.view.models[this.propertyKey]=!this.view.models[this.propertyKey])}bind(e){const t=this.args[0],n="true"===this.el.dataset.passive;e.addEventListener(t,this.toggle,{passive:n})}unbind(e){if(null===this.args)throw new Error("args is null");const t=this.args[0];e.removeEventListener(t,this.toggle)}routine(e,t){if(null===this.args)throw new Error("args is null");this.propertyKey=t}}B(Fe,"key","toggle-on-*");class je extends K{constructor(){super(...arguments),B(this,"publishes",!0),B(this,"priority",2e3),B(this,"onChange",this.publish.bind(this))}bind(e){e.addEventListener("change",this.onChange)}unbind(e){e.removeEventListener("change",this.onChange)}routine(e,t){"radio"===e.type?e.checked=N(e.value)!==N(t):e.checked=!t}getValue(e){return o(e)}}B(je,"key","unchecked");class De extends ye{routine(e,t){return super.routine(e,!t)}}B(De,"key","unless");class Ie extends K{constructor(){super(...arguments),B(this,"publishes",!0),B(this,"priority",3e3),B(this,"onChange",this.publish.bind(this))}getData(e){const t={type:e.type,tagName:e.tagName,contenteditable:!!e.getAttribute("contenteditable"),isRadio:!1};return t.isRadio="INPUT"===t.tagName&&"radio"===t.type,t}bind(e){if(!this.getData(e).isRadio){this.event=e.getAttribute("event-name")||"change input paste blur focus";const t=this.event.split(" ");for(const n of t)e.addEventListener(n.trim(),this.onChange,!1)}}unbind(e){if(this.event){const t=this.event.split(" ");for(const n in t)e.removeEventListener(n.trim(),this.onChange)}}routine(e,t){let n=this.getValue(e);if(Array.isArray(t)||(t=null!=t?N(t):""),Array.isArray(n)||(n=null!=n?N(n):""),n===t)return;if(this.getData(e).isRadio)e.setAttribute("value",t);else if("select-multiple"===e.type){if(Array.isArray(t))for(let n=0;n<e.options.length;n++){const r=e.options[n];r.selected=t.indexOf(r.value)>-1}}else e.getAttribute("contenteditable")?e.innerHTML=t:e.value=t}getValue(e){return o(e)}}B(Ie,"key","value");class Me{constructor(e,t,n,r){this.binder=new M(e),this.component=new H(t),this.formatter=new q(n),this.adapter=new I(r)}regist(e){if(!e)throw console.error(e),new Error("The Riba module is falsy!");e.binders&&this.binder.regists(e.binders),e.components&&this.component.regists(e.components),e.formatters&&this.formatter.regists(e.formatters),e.adapters&&this.adapter.regists(e.adapters)}}function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class Ve{static handler(e,t,n,r){if(!this||!this.call){const e=new Error("[rv-".concat(n.type,'="').concat(n.keypath,'"] Event handler "').concat(n.keypath,'" not found!"'));throw console.error(e,n,r,n.view.models),e}this.call(e,t,n.view.models,r)}set prefix(e){if(Array.isArray(e)){this._prefix=[],this._fullPrefix=[];for(const t of e)this._prefix.push(t),this._fullPrefix.push(t+"-")}}get prefix(){return this._prefix}get fullPrefix(){return this._fullPrefix}constructor(){if(B(this,"lifecycle",V.getInstance()),B(this,"binders",{}),B(this,"components",{}),B(this,"formatters",{}),B(this,"adapters",{}),B(this,"parseTemplate",le),B(this,"parseType",Y),B(this,"templateDelimiters",["{","}"]),B(this,"rootInterface","."),B(this,"preloadData",!0),B(this,"removeBinderAttributes",!0),B(this,"blockNodeNames",["SCRIPT","STYLE","TEMPLATE","CODE"]),B(this,"blockUnknownCustomElements",!0),B(this,"_prefix",["rv"]),B(this,"_fullPrefix",["rv-"]),this.module=new Me(this.binders,this.components,this.formatters,this.adapters),Ve.instance)return Ve.instance;Ve.instance=this}configure(e){if(e)for(const[t,n]of Object.entries(e))switch(t){case"binders":this.binders=Ue(Ue({},this.binders),n);break;case"formatters":this.formatters=Ue(Ue({},this.formatters),n);break;case"components":this.components=Ue(Ue({},this.components),n);break;case"adapters":this.adapters=Ue(Ue({},this.adapters),n);break;case"prefix":this.prefix=n;break;case"parseTemplate":this.parseTemplate=n;break;case"parseType":this.parseType=n;break;case"templateDelimiters":this.templateDelimiters=n;break;case"rootInterface":this.rootInterface=n;break;case"preloadData":this.preloadData=n;break;case"blockNodeNames":this.blockNodeNames=n;break;case"blockUnknownCustomElements":this.blockUnknownCustomElements=Boolean(n);break;default:console.warn("Option not supported",t,n)}}getViewOptions(e){const t={adapters:{},binders:{},components:{},formatters:{},attributeBinders:[],rootInterface:{}};if(e&&(t.binders=Ue(Ue({},t.binders),e.binders),t.formatters=Ue(Ue({},t.formatters),e.formatters),t.components=Ue(Ue({},t.components),e.components),t.adapters=Ue(Ue({},t.adapters),e.adapters)),null!=e&&e.prefix&&Array.isArray(null==e?void 0:e.prefix)){t.prefix=[],t.fullPrefix=[];for(const n of e.prefix)t.prefix.push(n),t.fullPrefix.push(n+"-")}else t.prefix=this.prefix,t.fullPrefix=this.fullPrefix;if(t.templateDelimiters=(null==e?void 0:e.templateDelimiters)||this.templateDelimiters,t.rootInterface=(null==e?void 0:e.rootInterface)||this.rootInterface,t.removeBinderAttributes="boolean"==typeof(null==e?void 0:e.removeBinderAttributes)?e.removeBinderAttributes:this.removeBinderAttributes,t.blockNodeNames=(null==e?void 0:e.blockNodeNames)||this.blockNodeNames,t.preloadData="boolean"==typeof(null==e?void 0:e.preloadData)?e.preloadData:this.preloadData,t.handler=(null==e?void 0:e.handler)||Ve.handler,t.binders=Ue(Ue({},this.binders),t.binders),t.formatters=Ue(Ue({},this.formatters),t.formatters),t.components=Ue(Ue({},this.components),t.components),t.adapters=Ue(Ue({},this.adapters),t.adapters),t.attributeBinders||(t.attributeBinders=[]),t.binders){const e=Object.keys(t.binders).filter((e=>e.indexOf("*")>=1));t.attributeBinders.push(...e)}return t}bind(e,t,n){const r=this.getViewOptions(n);t=t||Object.create(null),D.updateOptions(r);const i=new pe(e,t,r);return i.bind(),i}}window.Riba=Ve;const He=()=>{let e="#";for(let t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e};class qe extends HTMLElement{constructor(){super(),B(this,"_debug",!1),B(this,"templateLoaded",!1),B(this,"observedAttributesToCheck",{}),B(this,"observedAttributes",[]),this._debug&&(this._color=He())}remove(){this&&this.parentElement&&this.parentElement.removeChild(this)}_log(e){const t=this.constructor.name||this.tagName;this._color||(this._color=He());for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];!function(e){const t=[];e.color?(e.namespace?t.push("%c[".concat(e.namespace,"] ").concat(e.mode.toUpperCase(),": ")):t.push("%c".concat(e.mode.toUpperCase(),": ")),t.push("color: ".concat(e.color))):e.namespace?t.push("[".concat(e.namespace,"] ").concat(e.mode.toUpperCase(),": ")):t.push("".concat(e.mode.toUpperCase(),": "));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.push(...r),console[e.mode](...t)}({namespace:t,color:this._color,mode:e},...r)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._log("info",...t)}debug(){if(this._debug){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._log("debug",...t)}}error(){console.error(...arguments)}requiredAttributes(){return[]}async init(e){this.loadAttributes(e),this.getPassedObservedAttributes(e)}ready(){return this.allPassedObservedAttributesAreInitialized()&&this.checkRequiredAttributes()}attributeIsPassed(e){return this.hasAttribute(e)}getPassedObservedAttributes(e){const t=this.observedAttributesToCheck;for(const n of e)t[n]?t[n].passed||(t[n].passed=this.attributeIsPassed(n)):t[n]={passed:!1,initialized:!1}}allPassedObservedAttributesAreInitialized(){return Object.keys(this.observedAttributesToCheck).every((e=>{var t,n;return!(null!==(t=this.observedAttributesToCheck[e])&&void 0!==t&&t.passed)||(null===(n=this.observedAttributesToCheck[e])||void 0===n?void 0:n.initialized)}))}checkRequiredAttributes(){return this.requiredAttributes().every((e=>(e=P(e),this.scope.hasOwnProperty(e)&&void 0!==this.scope[e])))}parseAttribute(e){let t=e;if("true"===e)t=!0;else if("false"===e)t=!1;else if("null"===e)t=null;else if("undefined"===e)t=void 0;else if(""===e)t=void 0;else if(isNaN(Number(e))){const e=k(t);t=e||t}else t=Number(e),t>=Number.MAX_SAFE_INTEGER&&(t=e);return t}eventHandler(e){return function(t,n,r,i){if(!this||!this.call){const e=new Error("[rv-".concat(r.type,'="').concat(r.keypath,'"] Event handler "').concat(r.keypath,'" not found!"'));throw console.error(r,i),e}this.call(e,n,r.view.models,i)}}connectedCallback(){}disconnectedCallback(){}async attributeChangedCallback(e,t,n,r){this.observedAttributesToCheck&&this.observedAttributesToCheck[e]&&(this.observedAttributesToCheck[e].initialized=!0),n=this.parseAttribute(n);const i=P(e);this.scope&&this.scope[i]&&(t=this.scope[i]),this.scope[i]=n,this.parsedAttributeChangedCallback(i,t,n,r)}parsedAttributeChangedCallback(e,t,n,r){this.debug("parsedAttributeChangedCallback called",e,t,n,r)}adoptedCallback(e,t){this.debug("adoptedCallback called",e,t)}async loadTemplate(){return!0===this.templateLoaded?null:this.checkRequiredAttributes()?(this.templateLoaded=!0,Promise.resolve(this.template()).then((e=>(e instanceof HTMLElement?(this.innerHTML="",this.appendChild(e)):null!==e&&(this.innerHTML=e),e))).catch((e=>(console.error(e),this.templateLoaded=!1,null)))):(this.debug("Not all required attributes are set to load the template"),null)}async beforeTemplate(){}async afterTemplate(e){this.debug("afterTemplate",e)}async onReady(){}observe(e,t){return new D(this.scope,e,t)}observeAttribute(e,t){const n=P(e);return this.observe(n,t)}setBinderAttribute(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=P(e),i=this.scope[r];this.attributeChangedCallback(e,i,t,n)}getBinderAttribute(e){const t=P(e);return this.scope[t]}loadAttributes(e){const t=this.attributes;for(const n in t){const r=t[n],i=r.nodeName;if(-1!==e.indexOf(i)){const e=r.nodeValue;this.attributeChangedCallback(i,void 0,e,null)}}}}class We extends qe{get binds(){return this._binds}get bound(){return this._bound}get connected(){return this._connected}get disconnected(){return this._disconnected}constructor(){super(),B(this,"view",null),B(this,"_binds",!1),B(this,"_bound",!1),B(this,"_connected",!1),B(this,"_disconnected",!1),B(this,"lifecycleEvents",R.getInstance("lifecycle")),B(this,"autobind",!0),this.lifecycleEvents.trigger("Component:constructor",this.getLifecycleEventData()),this.lifecycleEvents.on("ComponentLifecycle:allBound",this.afterAllBind,this)}async init(e){try{return await super.init(e),this.lifecycleEvents.trigger("Component:init",this.getLifecycleEventData()),this.bindIfReady()}catch(e){this.throw(e)}}throw(e){e.message&&console.error("[".concat(this.tagName,"] ").concat(e.message)),this.lifecycleEvents.trigger("Component:error",e,this.getLifecycleEventData()),this.error(e)}async bindIfReady(){if(this.ready()){await this.beforeTemplate();const e=await this.loadTemplate();return await this.afterTemplate(e),this.autobind&&await this.bind(),void await this.onReady()}this.debug("Not all required or passed attributes are set to load and bind the template",this.observedAttributesToCheck,this.scope)}async _beforeBind(){this._binds=!0,this.debug("Start to bind Riba"),this.lifecycleEvents.trigger("Component:beforeBind",this.getLifecycleEventData())}async beforeBind(){}async _afterBind(){this._binds=!1,this._bound=!0,this.lifecycleEvents.trigger("Component:afterBind",this.getLifecycleEventData())}async afterBind(){}async afterAllBind(){}getLifecycleEventData(){return{tagName:this.tagName.toLowerCase(),component:this}}disconnectedCallback(){try{this._disconnected=!0,this._connected=!1,super.disconnectedCallback(),this.lifecycleEvents.trigger("Component:disconnected",this.getLifecycleEventData()),this.lifecycleEvents.off("ComponentLifecycle:allBound",this.afterAllBind,this)}catch(e){this.throw(e)}}connectedCallback(){try{this._disconnected=!1,this._connected=!0,super.connectedCallback(),this.lifecycleEvents.trigger("Component:connected",this.getLifecycleEventData())}catch(e){this.throw(e)}}async attributeChangedCallback(e,t,n,r){try{super.attributeChangedCallback(e,t,n,r),await this.bindIfReady()}catch(e){this.throw(e)}}callFormatterHandler(e){return{name:"call",read:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(!t)throw new Error("[".concat(e.tagName,'] Can not use "call" formatter: fn is undefined!'));return t.apply(e,r)}}}argsFormatterHandler(e){return{name:"args",read:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(n,i,s,o)=>{if(!t)throw new Error("[".concat(e.tagName,'] Can not use "args" formatter: fn is undefined!'));return r.push(n),r.push(i),r.push(s),r.push(o),t.apply(e,r)}}}}async bind(){if(this.binds||this.bound)return this.view;if(this.checkRequiredAttributes()){try{await this._beforeBind(),await this.beforeBind(),this.riba=new Ve,this.view=this.getView(),this.view&&(this.scope=this.view.models,this.view.bind()),await this._afterBind(),await this.afterBind()}catch(e){this._binds=!1,this._bound=!1,this.throw(e)}return this.view}this.debug("Not all required attributes are set for bind")}getView(){try{var e;const t=null===(e=this.riba)||void 0===e?void 0:e.getViewOptions({handler:this.eventHandler(this),formatters:{call:this.callFormatterHandler(this),args:this.argsFormatterHandler(this)}});if(t){return new pe(Array.prototype.slice.call(this.childNodes),this.scope,t)}return null}catch(e){this.throw(e)}}async unbind(){try{this.view&&(this._binds=!1,this._bound=!1,this.view.unbind(),this.view=null)}catch(e){this.throw(e)}}async build(){try{this.view&&this.view.build()}catch(e){this.throw(e)}}}class ze extends We{static get observedAttributes(){return["video-src","autoplay-on-min-buffer","autoplay-media-query"]}get muted(){return this.video&&this.video.muted}set muted(e){this.video.muted=e,this.scope.muted=this.video.muted,e?this.video.setAttribute("muted",""):this.video.removeAttribute("muted"),this.onUpdate()}get volume(){var e;return(null===(e=this.video)||void 0===e?void 0:e.volume)||0}set volume(e){this.video.volume=e,this.onUpdate()}get loop(){var e;return null===(e=this.video)||void 0===e?void 0:e.loop}set loop(e){this.video.loop=e,e?this.video.setAttribute("loop",""):this.video.removeAttribute("loop"),this.onUpdate()}get controls(){var e;return null===(e=this.video)||void 0===e?void 0:e.controls}set controls(e){this.video.controls=e,this.scope.controls=this.video.controls,e?(this.video.setAttribute("controls",""),this.video.dispatchEvent(new Event("mouseover")),this.video.dispatchEvent(new Event("mouseenter")),this.video.dispatchEvent(new Event("mousemove"))):this.video.removeAttribute("controls"),this.onUpdate()}get currentTime(){var e;return(null===(e=this.video)||void 0===e?void 0:e.currentTime)||0}set currentTime(e){this.video.currentTime=e,this.onUpdate()}get autoplay(){var e;return(null===(e=this.video)||void 0===e?void 0:e.autoplay)||!1}set autoplay(e){this.video.autoplay=e,this.onUpdate()}get height(){var e;return(null===(e=this.video)||void 0===e?void 0:e.height)||0}set height(e){this.video.height=e,this.onUpdate()}get width(){var e;return(null===(e=this.video)||void 0===e?void 0:e.width)||0}set width(e){this.video.width=e,this.onUpdate()}get poster(){var e;return null===(e=this.video)||void 0===e?void 0:e.poster}set poster(e){this.video.poster=e,this.onUpdate()}get preload(){var e;return null===(e=this.video)||void 0===e?void 0:e.preload}set preload(e){this.video.preload=e,this.onUpdate()}get disablePictureInPicture(){var e,t;return(null===(e=this.video)||void 0===e?void 0:e.disablePictureInPicture)||(null===(t=this.video)||void 0===t?void 0:t.hasAttribute("disablePictureInPicture"))||!1}set disablePictureInPicture(e){var t;void 0!==(null===(t=this.video)||void 0===t?void 0:t.disablePictureInPicture)&&(this.video.disablePictureInPicture=e),e?this.video.setAttribute("disablePictureInPicture",""):this.video.removeAttribute("disablePictureInPicture"),this.onUpdate()}get paused(){var e,t;return null===(e=null===(t=this.video)||void 0===t?void 0:t.paused)||void 0===e||e}constructor(){super(),B(this,"autobind",!0),B(this,"alreadyStartedPlaying",!1),B(this,"wasPaused",!1),B(this,"_debug",!1),B(this,"scope",{muted:this.muted,volume:this.volume,loop:this.loop,controls:this.controls,currentTime:this.currentTime,videoSrc:void 0,autoplayOnMinBuffer:0,autoplayMediaQuery:"",disablePictureInPicture:this.disablePictureInPicture,paused:this.paused,loading:!1,duration:0,readyState:T.HAVE_NOTHING,buffer:0,toggleMute:this.toggleMute,toggleControls:this.toggleControls,play:this.play,pause:this.pause,togglePlay:this.togglePlay,togglePause:this.togglePause,reset:this.reset}),B(this,"onUpdate",this._onUpdate.bind(this)),B(this,"forceAutoplay",this._forceAutoplay.bind(this)),B(this,"onMediaQueryListEvent",this._onMediaQueryListEvent.bind(this)),B(this,"onVideoProgress",this._onVideoProgress.bind(this)),B(this,"onLoadStart",this._onLoadStart.bind(this)),B(this,"onCanPlay",this._onCanPlay.bind(this)),B(this,"onCanPlayThrough",this._onCanPlayThrough.bind(this)),B(this,"onWaiting",this._onWaiting.bind(this)),B(this,"onDurationChange",this._onDurationChange.bind(this)),B(this,"onTimeUpdate",this._onTimeUpdate.bind(this)),B(this,"onPlay",this._onPlay.bind(this)),B(this,"onPause",this._onPause.bind(this));const e=this.querySelector("video");this.video=e}toggleMute(){this.debug("toggleMute"),this.muted=!this.muted,this.onUpdate()}toggleControls(){this.debug("toggleControls"),this.controls=!this.controls,this.onUpdate()}play(){this.debug("play"),this.video.play()}pause(){this.debug("pause"),this.video.pause(),this.onUpdate()}togglePlay(){return this.paused?this.play():this.pause()}togglePause(){return this.debug("togglePause"),this.togglePlay()}reset(){this.debug("reset"),this.video.currentTime=0,this.onUpdate()}connectedCallback(){super.connectedCallback(),this.init(ze.observedAttributes)}initVideoElement(){const e=this.querySelector("video");if(!e)throw new Error("The video child element is required!");this.video=e,this.addEventListeners(),this.onUpdate()}resetVideo(){this.video.innerHTML="";const e=this.video.cloneNode(!0),t=this.querySelector(".video-wrapper");this.removeEventListeners(),this.video.remove(),t?t.appendChild(e):this.appendChild(e),this.video=e,this.video.hasAttribute("muted")?this.muted=!0:this.muted=!1,this.video.hasAttribute("controls")?this.controls=!0:this.controls=!1,this.video.hasAttribute("autoplay")?this.autoplay=!0:this.autoplay=!1,this.video.hasAttribute("height")&&(this.height=_(this.video.getAttribute("height")||0)),this.video.hasAttribute("width")&&(this.width=_(this.video.getAttribute("width")||0)),this.video.hasAttribute("loop")?this.loop=!0:this.loop=!1,this.video.hasAttribute("muted")?this.muted=!0:this.muted=!1,this.video.hasAttribute("poster")&&(this.poster=this.video.getAttribute("poster")||""),this.video.hasAttribute("preload")&&(this.preload=this.video.getAttribute("preload")||""),this.video.hasAttribute("disablePictureInPicture")?this.disablePictureInPicture=!0:this.disablePictureInPicture=!1,this.scope.readyState=T.HAVE_NOTHING,this.alreadyStartedPlaying=!1,this.scope.loading=!1,this.initVideoElement()}setVideoSource(){if(this.scope.videoSrc){this.resetVideo();let e=this.video.querySelector("source");e||(e=document.createElement("source"),this.video.appendChild(e)),e.setAttribute("src",this.scope.videoSrc)}}parsedAttributeChangedCallback(e,t,n,r){super.parsedAttributeChangedCallback(e,t,n,r),this.debug("parsedAttributeChangedCallback",e),"videoSrc"===e&&this.setVideoSource()}addEventListeners(){if(this.scope.autoplayMediaQuery){const e=window.matchMedia(this.scope.autoplayMediaQuery);e.addEventListener("change",this.onMediaQueryListEvent),e.matches&&this.startAutoplay()}this.video.addEventListener("progress",this.onVideoProgress),this.video.addEventListener("loadstart",this.onLoadStart),this.video.addEventListener("canplay",this.onCanPlay),this.video.addEventListener("canplaythrough",this.onCanPlayThrough),this.video.addEventListener("waiting",this.onWaiting),this.video.addEventListener("durationchange",this.onDurationChange),this.video.addEventListener("timeupdate",this.onTimeUpdate),this.video.addEventListener("play",this.onPlay),this.video.addEventListener("pause",this.onPause)}removeEventListeners(){if(this.scope.autoplayMediaQuery){window.matchMedia(this.scope.autoplayMediaQuery).removeEventListener("change",this.onMediaQueryListEvent)}this.video.removeEventListener("progress",this.onVideoProgress),this.video.removeEventListener("loadstart",this.onLoadStart),this.video.removeEventListener("canplay",this.onCanPlay),this.video.removeEventListener("canplaythrough",this.onCanPlayThrough),this.video.removeEventListener("waiting",this.onWaiting),this.video.removeEventListener("durationchange",this.onDurationChange),this.video.removeEventListener("timeupdate",this.onTimeUpdate),this.video.removeEventListener("play",this.onPlay),this.video.removeEventListener("pause",this.onPause)}_onUpdate(){this.scope.muted!==this.video.muted&&(this.scope.muted=this.video.muted),this.scope.volume!==this.video.volume&&(this.scope.volume=this.video.volume),this.scope.loop!==this.video.loop&&(this.scope.loop=this.video.loop),this.scope.controls!==this.video.controls&&(this.scope.controls=this.video.controls),this.scope.currentTime!==this.video.currentTime&&(this.scope.currentTime=this.video.currentTime),this.scope.paused!==this.video.paused&&(this.scope.paused=this.video.paused),this.scope.duration!==this.video.duration&&(this.scope.duration=this.video.duration),this.scope.readyState!==this.video.readyState&&(this.scope.readyState=this.video.readyState)}async beforeBind(){this.initVideoElement()}startAutoplay(){this.scope.autoplayOnMinBuffer?this.forceLoad():this.forceAutoplay()}forceLoad(){this.video.setAttribute("preload","auto"),this.video.load()}_forceAutoplay(){this.alreadyStartedPlaying||(this.alreadyStartedPlaying=!0,this.video.muted=!0,this.forceLoad(),this.play())}_onMediaQueryListEvent(e){e.matches?this.alreadyStartedPlaying?this.wasPaused||this.play():this.startAutoplay():(this.wasPaused=this.video.paused,this.pause())}_onVideoProgress(){if(this.debug("_onVideoProgress"),this.alreadyStartedPlaying)return;if(isNaN(this.video.duration))return void console.warn("Video duration is NaN");let e=0;for(let t=0;t<this.video.buffered.length;t++)e+=this.video.buffered.end(t)-this.video.buffered.start(t);this.scope.buffer=e/this.video.duration,this.scope.autoplayOnMinBuffer&&this.scope.buffer>this.scope.autoplayOnMinBuffer&&this.forceAutoplay()}_onLoadStart(){this.debug("_onLoadStart"),this.scope.loading=!0,this.onUpdate()}_onCanPlay(){this.debug("_onCanPlay"),this.onUpdate()}_onCanPlayThrough(){this.scope.loading=!1,this.scope.autoplayOnMinBuffer&&this.forceAutoplay(),this.onUpdate()}_onWaiting(){this.debug("_onPlay"),this.scope.loading=!0,this.onUpdate()}_onDurationChange(){this.onUpdate()}_onTimeUpdate(){this.onUpdate()}_onPlay(){this.debug("_onPlay"),this.scope.loading=!1,this.alreadyStartedPlaying=!0,this.scope.paused=!1,this.onUpdate()}_onPause(){this.scope.paused=!0,this.onUpdate()}async init(e){return super.init(e).then((e=>e))}disconnectedCallback(){super.disconnectedCallback()}template(){return null}}B(ze,"tagName","rv-video");const Je={name:"contains",read(e,t,n){if(x(e))return e.indexOf(t)>-1;if(Array.isArray(e)){if(O(t)||console.warn("[containsFormatter] The second parameter must be of type number for arrays but is "+typeof t),t=Number(t),E(t))return E(n)?e[t]===n:-1!==e.indexOf(t)}else if(C(e)&&E(t))return E(n)?e[t]===n:(x(t)||console.warn("[containsFormatter] The second parameter must be of type string for objects"+typeof t),-1!==Object.keys(e).indexOf(String(t)));return!1}},Ge={name:"size",read:e=>e&&e.length?e.length:0},$e={name:"empty",read:e=>Ge.read(e)<=0},Ye={name:"get",read:(e,t)=>C(e)||Array.isArray(e)?e[t]:x(e)&&O(t)?e.charAt(t):null},Qe={name:"first",read:e=>Ye.read(e,0)},Xe={name:"isLast",read:(e,t)=>e.length===t+1},Ke={name:"last",read:e=>Ye.read(e,e.length-1)},Ze={name:"random",read(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(Array.isArray(e))return e[Math.floor(Math.random()*e.length)];if(O(e)){const n=e;return Math.floor(Math.random()*(n-t+1)+t)}return null}},et={name:"range",read:(e,t,n)=>(t=Number(O(t)?t:0),(n=Number(O(n)?n:e.length-1))>e.length-1&&(n=e.length-1),t>n?[]:e.slice(Number(t||0),1+n))},tt={name:"set",read:(e,t,n)=>(n||(n=t),C(e)||Array.isArray(e)?e[t]=n:e=n,e)},nt={name:"overlaps",read(e,t){for(const n of e)for(const e of t){if(n.equals&&n.equals(e))return!0;if(n===e)return!0}return!1}},rt={name:"join",read:(e,t)=>e.join(t)},it={name:"and",read:(e,t)=>e&&t},st={name:"between",read(e){return e>=(arguments.length<=1?void 0:arguments[1])&&e<=(arguments.length<=2?void 0:arguments[2])}},ot={name:"egt",read:(e,t)=>e>=t},at={name:"eq",read:(e,t)=>e===t},ct={name:"gt",read:(e,t)=>e>t},lt={name:"ne",read:(e,t)=>e!==t},dt={name:"lt",read:(e,t)=>e<t},ht={name:"elt",read:(e,t)=>e<=t},ut={name:"or",read:(e,t)=>e||t},pt={name:"not",read:e=>!e},mt={name:"plus",read:(e,t)=>Number(e)+Number(t)},ft={name:"minus",read:(e,t)=>Number(e)-Number(t)},bt={name:"times",read:(e,t)=>Number(e)*Number(t)},vt={name:"dividedBy",read:(e,t)=>Number(e)/Number(t)},gt={name:"modulo",read:(e,t)=>Number(e)%Number(t)},yt=(e,t)=>0===t?e:yt(t,e%t),wt={name:"gcd",read:yt},kt={name:"even",read:e=>e%2==0},At={name:"uneven",read:e=>e%2!=0},Et={name:"digits",read:e=>O(e)?e:_(e)},Ct={name:"args",read(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return(t,r,i,s)=>(n.push(t),n.push(r),n.push(i),n.push(s),e.apply(this,n))}},Nt={name:"debug",read(e){return console[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"debug"](e),e}},Ot={name:"default",read:(e,t)=>E(e)?x(e)?e.length>0?e:t:null===e?t:e:t},xt={name:"is-desktop",read:()=>g().isDesktop},_t={name:"is-mobile",read:()=>g().isMobile},Pt={name:"call",read(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(this,n)}},St={name:"call-name",read:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e[t](...r)}},Tt={name:"map",read(e,t,n){const r=Array.prototype.slice.call(arguments);return r.splice(1,2),t[n].apply(t,r)}},Bt={name:"os",read:()=>v()},Lt={name:"prefer",read:(e,t)=>t||e},Ft={name:"ternary",read:(e,t,n)=>e?t:n},jt={name:"append",read:(e,t)=>e+t},Dt={name:"capitalize",read:e=>(e=>"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1))(e)},It={name:"cut",read(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?"string"!=typeof e?(console.warn("[cutFormatter] Value must be of type string"),e):e.length>t?e.substring(t,-1===t?void 0:-1)+n:e:""}},Mt={name:"downcase",read:e=>e.toLowerCase()},Rt={name:"ends-with",read:(e,t)=>"string"!=typeof e?(console.warn("[endsWithFormatter] Value must be of type string"),e):e.endsWith(t)},Ut={name:"filled",read:e=>x(e)&&!$e.read(e.replace(/\s/g,""))},Vt={name:"handleize",read:e=>e?(e=>(e=(e=>e.replace(/ä/g,"ae").replace(/ö/g,"oe").replace(/ü/g,"ue").replace(/ß/g,"ss").replace(/Ä/g,"Ae").replace(/Ö/g,"Oe").replace(/Ü/g,"Üe"))(e=(e=>e.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>{}[\]\\/]/gi,""))(e=(e=>e.replace(/\s\s+/g," "))(e=(e=e.trim()).toLowerCase())))).replace(/ /g,"-"))(e):(console.warn("[handleizeFormatter] str is not set"),"")},Ht={name:"match",read:(e,t,n)=>!(!e||!t)&&e.match(new RegExp(t,n))},qt={name:"padStart",read(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return e.padStart(t,n)}},Wt={name:"padEnd",read(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return e.padEnd(t,n)}},zt={name:"to-integer",read(e){const t=parseInt(1*e,10);return isNaN(t)?0:t}},Jt={name:"to-float",read(e){const t=parseFloat(1*e);return isNaN(t)?0:t}},Gt={name:"to-decimal",read(e){if(!zt.read)throw new Error("toIntegerFormatter must have a read function");if(!Jt.read)throw new Error("toFloatFormatter must have a read function");const t=zt.read(1*e),n=Jt.read(e);return t==n?t:n}},$t={name:"is-integer",read:e=>e===+e&&e===(0|e)},Yt={name:"numberFormat",read(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"'";if(!Gt.read)throw new Error("toDecimalFormatter must have a read function");if(!$t.read)throw new Error("isIntegerFormatter must have a read function");e=O(e)?e:Gt.read(e),$t.read(t)||(t=2);let i=(+(Math.round(+(Math.abs(e)+"e"+t))+"e"+-t)).toFixed(t);e<0&&(i="-"+i);const s=i.split(".");return 2==s.length?s[0].replace(/\B(?=(\d{3})+(?!\d))/g,r)+n+s[1]:s[0].replace(/\B(?=(\d{3})+(?!\d))/g,r)}},Qt={name:"pluralize",read:(e,t,n)=>(null===n&&(n=t+"s"),Array.isArray(e)&&(e=e.length),1===e?t:n)},Xt={name:"prepend",read:(e,t)=>t+e},Kt={name:"upcase",read:e=>e.toUpperCase()},Zt={name:"replace",read:(e,t,n)=>e.replace(new RegExp(t,"g"),n)},en={name:"replaceFirst",read:(e,t,n)=>e.replace(t,n)},tn={name:"slice",read:(e,t,n)=>e.slice(t,n)},nn={name:"starts-with",read:(e,t)=>"string"!=typeof e?(console.warn("[startsWithFormatter] Value must be of type string"),e):e.startsWith(t)},rn={name:"strip",read:e=>e.trim()},sn={name:"strip-html",read:e=>(e=>{const t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""})(e)},on={name:"boolean",read:e=>"true"===e||"false"!==e&&!!e},an={name:"is-array",read:Array.isArray},cn={name:"is-boolean",read:e=>"boolean"==typeof e},ln={name:"is-defined",read:E},dn={name:"is-number",read:O},hn={name:"is-object",read:C},un={name:"is-string",read:e=>x(e)},pn={name:"is-undefined",read:A},mn={name:"parse",read:e=>x(e)?k(e):C(e)||Array.isArray(e)?(console.warn("[parseFormatter] You do not need to parse the value because since it already been parsed"),e):null},fn={name:"to-string",read(e,t){if(Array.isArray(e))for(const t in e)e[t]&&(e[t]=N(e[t]));else if(C(e))for(const t in e)e[t]=N(e[t]);else e=N(e);return t?e||t:e}},bn={name:"to-number",read(e,t){const n=(r=e)?parseFloat(r):void 0;var r;return t?n||t:n}},vn={formatters:s,binders:r,services:e,components:i,adapters:t,init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return U.setSingleton(e),this}};var gn=n(695),yn=n.n(gn);class wn extends We{constructor(){super(...arguments),B(this,"scope",{message:"I am the CSR Component ;)"})}static get observedAttributes(){return[]}connectedCallback(){super.connectedCallback(),this.init(wn.observedAttributes)}template(){return yn()(this.scope)}}B(wn,"tagName","hello-csr");const kn=new Ve;kn.configure({prefix:["rv","csr-rv"],blockUnknownCustomElements:!1,templateDelimiters:["[","]"]}),kn.module.component.regist(wn),kn.module.regist(vn.init({})),kn.lifecycle.events.on("ComponentLifecycle:error",(e=>{console.error(e)})),(e=>{if(!e||"function"!=typeof e)return new Error("The callback is required!");const t=()=>{"loading"!==document.readyState&&(e(),document.attachEvent&&document.detachEvent("onreadystatechange",t),document.removeEventListener("DOMContentLoaded",t))};document.attachEvent&&document.attachEvent("onreadystatechange",t),document.addEventListener&&document.addEventListener("DOMContentLoaded",t),t()})((()=>{var e;kn.bind(null===(e=document)||void 0===e?void 0:e.body)}))}()}();